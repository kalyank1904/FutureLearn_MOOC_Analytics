skim(enrolments_all)
skim(steps_all)
steps_summary <- steps_all %>%
count(step_id, sort = TRUE)
names(steps_all)
glimpse(steps_all)
steps_summary <- steps_all %>%
count(step_title, sort = TRUE)
steps_summary <- steps_all %>%
count(step_url, sort = TRUE)
steps_summary %>%
slice_max(n, n = 20) %>%
ggplot(aes(reorder(step, n), n)) +
geom_col() +
coord_flip() +
labs(
title = "Top 20 Most Active Steps",
x = "Step",
y = "Number of Interactions"
)
steps_all <- steps_all %>%
rename(
step_label = coalesce(
step_id,
step,
step_title,
step_url
)
)
steps_summary <- steps_all %>%
count(step_label, sort = TRUE)
library(tidyverse)
data_dir <- "data/raw/MAS8600_MAS8505_02_main_report_FutureLearn_MOOC_Dataset"
step_files <- list.files(
data_dir,
pattern = "step-activity\\.csv$",
full.names = TRUE
)
steps_all <- step_files %>%
set_names(basename(.)) %>%
map_dfr(read_csv, .id = "source_file")
glimpse(steps_all)
step_col <- intersect(
names(steps_all),
c("step", "step_title", "step_url", "step_id")
)[1]
step_col
steps_summary <- steps_all %>%
count(.data[[step_col]], sort = TRUE)
ggplot(
steps_summary %>% slice_max(n, n = 20),
aes(reorder(.data[[step_col]], n), n)
) +
geom_col() +
coord_flip() +
labs(
title = "Top 20 Most Active Course Steps",
x = "Step",
y = "Number of Interactions"
)
installed.packages()[, "Package"]
library(ProjectTemplate)
library(renv)
library(tidyverse)
library(skimr)
library(GGally)
library(caret)
library(randomForest)
library(e1071)
library(pROC)
library(rmarkdown)
# Install required packages (run once)
install.packages(c(
"ProjectTemplate", "renv", "tidyverse",
"skimr", "GGally", "caret", "randomForest",
"e1071", "pROC", "rmarkdown"
))
setwd("C:/Users/Admin/Documents/FutureLearn_MOOC_Analytics")
getwd()
list.files()
renv::init()
library(ProjectTemplate)
ProjectTemplate::clean.project()
library(ProjectTemplate)
load.project()
library(ProjectTemplate)
load.project()
class(cache)
library(ProjectTemplate)
class(cache)
migrate.project()
load.project()
library(tidyverse)
data_dir <- "data/raw/MAS8600_MAS8505_02_main_report_FutureLearn_MOOC_Dataset"
step_files <- list.files(
data_dir,
pattern = "step-activity\\.csv$",
full.names = TRUE
)
datasets <- cache("raw_data")
cache("enrolments",
datasets[grepl("enrolments", names(datasets))])
cache("step_activity",
datasets[grepl("step-activity", names(datasets))])
cache("question_response",
datasets[grepl("question-response", names(datasets))])
cache("sentiment",
datasets[grepl("weekly-sentiment", names(datasets))])
steps_all <- step_files %>%
set_names(basename(.)) %>%
map_dfr(read_csv, .id = "source_file")
glimpse(steps_all)
step_col <- intersect(
names(steps_all),
c("step", "step_title", "step_url", "step_id")
)[1]
step_col
steps_summary <- steps_all %>%
count(.data[[step_col]], sort = TRUE)
ggplot(
steps_summary %>% slice_max(n, n = 20),
aes(reorder(.data[[step_col]], n), n)
) +
geom_col() +
coord_flip() +
labs(
title = "Top 20 Most Active Course Steps",
x = "Step",
y = "Number of Interactions"
)
library(tidyverse)
data_dir <- "data/raw/MAS8600_MAS8505_02_main_report_FutureLearn_MOOC_Dataset"
step_files <- list.files(
data_dir,
pattern = "step-activity\\.csv$",
full.names = TRUE
)
datasets <- cache("raw_data")
cache("enrolments",
datasets[grepl("enrolments", names(datasets))])
cache("step_activity",
datasets[grepl("step-activity", names(datasets))])
cache("question_response",
datasets[grepl("question-response", names(datasets))])
cache("sentiment",
datasets[grepl("weekly-sentiment", names(datasets))])
steps_all <- step_files %>%
set_names(basename(.)) %>%
map_dfr(read_csv, .id = "source_file")
glimpse(steps_all)
step_col <- intersect(
names(steps_all),
c("step", "step_title", "step_url", "step_id")
)[1]
step_col
steps_summary <- steps_all %>%
count(.data[[step_col]], sort = TRUE)
ggplot(
steps_summary %>% slice_max(n, n = 20),
aes(reorder(.data[[step_col]], n), n)
) +
geom_col() +
coord_flip() +
labs(
title = "Top 20 Most Active Course Steps",
x = "Step",
y = "Number of Interactions"
)
library(tidyverse)
data_dir <- "data/raw/MAS8600_MAS8505_02_main_report_FutureLearn_MOOC_Dataset"
step_files <- list.files(
data_dir,
pattern = "step-activity\\.csv$",
full.names = TRUE
)
datasets <- cache("raw_data")
cache("enrolments",
datasets[grepl("enrolments", names(datasets))])
cache("step_activity",
datasets[grepl("step-activity", names(datasets))])
cache("question_response",
datasets[grepl("question-response", names(datasets))])
cache("sentiment",
datasets[grepl("weekly-sentiment", names(datasets))])
library(tidyverse)
data_dir <- "data/raw/MAS8600_MAS8505_02_main_report_FutureLearn_MOOC_Dataset"
# Load step activity files
step_files <- list.files(
data_dir,
pattern = "step-activity\\.csv$",
full.names = TRUE
)
steps_all <- step_files %>%
set_names(basename(.)) %>%
map_dfr(read_csv, .id = "source_file")
# Cache raw datasets
cache("step_activity", steps_all)
datasets <- cache("raw_data")
cache(
"enrolments",
datasets[grepl("enrolments", names(datasets))]
)
cache(
"question_response",
datasets[grepl("question-response", names(datasets))]
)
cache(
"sentiment",
datasets[grepl("weekly-sentiment", names(datasets))]
)
library(tidyverse)
data_dir <- "data/raw/MAS8600_MAS8505_02_main_report_FutureLearn_MOOC_Dataset"
step_files <- list.files(
data_dir,
pattern = "step-activity\\.csv$",
full.names = TRUE
)
step_activity <- step_files %>%
set_names(basename(.)) %>%
map_dfr(read_csv, .id = "source_file")
cache("step_activity", step_activity)
step_activity <- step_activity %>%
filter(!is.na(user_id)) %>%
mutate(
timestamp = lubridate::ymd_hms(timestamp)
)
step_col <- intersect(
names(step_activity_clean),
c("step", "step_title", "step_url", "step_id")
)[1]
step_activity_clean <- step_activity %>%
filter(!is.na(learner_id)) %>%
mutate(
timestamp = lubridate::ymd_hms(timestamp)
)
library(tidyverse)
data_dir <- "data/raw/MAS8600_MAS8505_02_main_report_FutureLearn_MOOC_Dataset"
step_files <- list.files(
data_dir,
pattern = "step-activity\\.csv$",
full.names = TRUE
)
step_activity <- step_files %>%
set_names(basename(.)) %>%
map_dfr(read_csv, .id = "source_file")
cache("step_activity", step_activity)
step_activity_clean <- step_activity %>%
filter(!is.na(step)) %>%      # safe filter
mutate(
step = as.character(step)
)
cache("step_activity_clean", step_activity_clean)
step_col <- intersect(
names(step_activity_clean),
c("step", "step_title", "step_url", "step_id")
)[1]
step_summary <- step_activity_clean %>%
count(.data[[step_col]], sort = TRUE)
cache("step_summary", step_summary)
library(ProjectTemplate)
load.project()
library(ProjectTemplate)
load.project()
step_activity
step_activity_clean
step_summary
library(skimr)
skim(step_activity_clean)
step_cluster_data <- step_summary %>%
rename(step = 1, interactions = n) %>%
mutate(interactions = scale(interactions))
set.seed(123)
kmeans_model <- kmeans(step_cluster_data$interactions, centers = 3)
step_clusters <- step_summary %>%
mutate(cluster = factor(kmeans_model$cluster))
cache("step_clusters", step_clusters)
library(caret)
model_data <- step_summary %>%
rename(step = 1, interactions = n)
train_control <- trainControl(method = "cv", number = 5)
rf_model <- train(
interactions ~ step,
data = model_data,
method = "rf",
trControl = train_control
)
cache("rf_model", rf_model)
knitr::opts_chunk$set(echo = TRUE)
library(ProjectTemplate)
load.project()
skim(step_activity_clean)
library(ggplot2)
library(skimr)
library(caret)
skim(step_activity_clean)
head(step_summary)
head(step_summary)
summary(step_summary$n)
ggplot(
step_summary %>% slice_max(n, n = 20),
aes(reorder(.data[[1]], n), n)
) +
geom_col() +
coord_flip() +
labs(
title = "Top 20 Most Active Course Steps",
x = "Course Step",
y = "Number of Interactions"
)
ggplot(
step_summary %>% slice_max(n, n = 20),
aes(x = reorder(.data[[step_col]], n), y = n)
) +
geom_col() +
coord_flip() +
labs(
title = "Top 20 Most Active Course Steps",
x = "Course Step",
y = "Number of Interactions"
)
table(step_clusters$cluster)
table(step_clusters$cluster)
ggplot(step_clusters, aes(cluster, n)) +
geom_boxplot() +
labs(
title = "Engagement Clusters of Course Steps",
x = "Cluster",
y = "Number of Interactions"
)
rf_model
library(caret)
model_data <- step_summary %>%
rename(step = 1, interactions = n) %>%
mutate(
engagement_level = case_when(
interactions >= quantile(interactions, 0.75) ~ "High",
interactions >= quantile(interactions, 0.25) ~ "Medium",
TRUE ~ "Low"
),
engagement_level = factor(engagement_level)
)
set.seed(123)
rf_class_model <- train(
engagement_level ~ interactions,
data = model_data,
method = "rf",
trControl = trainControl(method = "cv", number = 5)
)
rf_class_model
cache("rf_class_model", rf_class_model)
varImp(rf_class_model)
rf_class_model
step_cluster_data <- step_summary %>%
rename(step = 1, interactions = n) %>%
mutate(interactions_scaled = scale(interactions))
set.seed(123)
kmeans_model <- kmeans(step_cluster_data$interactions_scaled, centers = 2)
step_clusters <- step_summary %>%
mutate(cluster = factor(kmeans_model$cluster))
cache("step_clusters", step_clusters)
table(step_clusters$cluster)
ggplot(step_clusters, aes(cluster, n)) +
geom_boxplot() +
labs(
title = "Engagement Clusters of Course Steps",
x = "Cluster",
y = "Number of Interactions"
)
ggplot(
step_summary %>% slice_max(n, n = 20),
aes(x = reorder(.data[[step_col]], n), y = n)
) +
geom_col() +
coord_flip() +
labs(
title = "Top 20 Most Active Course Steps",
x = "Course Step",
y = "Number of Interactions"
)
library(ggplot2)
library(skimr)
library(caret)
skim(step_activity_clean)
ggplot(
step_summary %>% slice_max(n, n = 20),
aes(x = reorder(.data[[step_col]], n), y = n)
) +
geom_col() +
coord_flip() +
labs(
title = "Top 20 Most Active Course Steps",
x = "Course Step",
y = "Number of Interactions"
)
ggplot(step_clusters, aes(cluster, n)) +
geom_boxplot() +
labs(
title = "Distribution of Interactions by Engagement Cluster",
x = "Engagement Cluster",
y = "Number of Interactions"
)
ggplot(
step_summary %>% slice_max(n, n = 20),
aes(x = reorder(.data[[step_col]], n), y = n)
) +
geom_col() +
coord_flip() +
labs(
title = "Top 20 Most Active Course Steps",
x = "Course Step",
y = "Number of Interactions"
)
step_summary_ranked <- step_summary %>%
arrange(desc(n)) %>%
mutate(rank = row_number())
ggplot(step_summary_ranked, aes(rank, n)) +
geom_line() +
labs(
title = "Ranked Engagement Across Course Steps",
x = "Step Rank (Most to Least Active)",
y = "Number of Interactions"
)
ggplot(
step_summary %>% slice_max(n, n = 20),
aes(x = reorder(.data[[step_col]], n), y = n)
) +
geom_col() +
coord_flip() +
labs(
title = "Top 20 Most Active Course Steps",
x = "Course Step",
y = "Number of Interactions"
)
step_summary_ranked <- step_summary %>%
arrange(desc(n)) %>%
mutate(rank = row_number())
ggplot(step_summary_ranked, aes(rank, n)) +
geom_line() +
labs(
title = "Ranked Engagement Across Course Steps",
x = "Step Rank (Most to Least Active)",
y = "Number of Interactions"
)
ggplot(step_summary, aes(x = n)) +
geom_histogram(bins = 30) +
scale_x_log10() +
labs(
title = "Log-Scaled Distribution of Step Interactions",
x = "Log(Number of Interactions)",
y = "Number of Steps"
)
skim(step_activity_clean)
step_activity_clean <- step_activity %>%
filter(!is.na(step)) %>%      # safe filter
mutate(
step = as.character(step)
)
cache("step_activity_clean", step_activity_clean)
skim(step_activity_clean)
library(ProjectTemplate)
load.project()
ls()
skimr::skim(step_activity_clean)
rmarkdown::render("reports/main_report.Rmd")
rmarkdown::render("report/main_report.Rmd")
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(skimr)
library(caret)
skim(step_activity_clean)
head(step_summary)
summary(step_summary$n)
ggplot(
step_summary %>% slice_max(n, n = 20),
aes(x = reorder(.data[[step_col]], n), y = n)
) +
geom_col() +
coord_flip() +
labs(
title = "Top 20 Most Active Course Steps",
x = "Course Step",
y = "Number of Interactions"
)
step_summary_ranked <- step_summary %>%
arrange(desc(n)) %>%
mutate(rank = row_number())
ggplot(step_summary_ranked, aes(rank, n)) +
geom_line() +
labs(
title = "Ranked Engagement Across Course Steps",
x = "Step Rank (Most to Least Active)",
y = "Number of Interactions"
)
ggplot(step_summary, aes(x = n)) +
geom_histogram(bins = 30) +
scale_x_log10() +
labs(
title = "Log-Scaled Distribution of Step Interactions",
x = "Log(Number of Interactions)",
y = "Number of Steps"
)
table(step_clusters$cluster)
ggplot(step_clusters, aes(cluster, n)) +
geom_boxplot() +
labs(
title = "Engagement Clusters of Course Steps",
x = "Cluster",
y = "Number of Interactions"
)
rf_class_model
rmarkdown::render("reports/main_report.Rmd")
rmarkdown::render("report/main_report.Rmd")
